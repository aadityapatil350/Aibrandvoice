generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DATABASE_URL")
}

model User {
  id                    String   @id @default(uuid())

  // Auth fields (synced from Supabase)
  supabaseId            String   @unique
  email                 String   @unique
  fullName              String?
  avatarUrl             String?
  provider              String?  // google, github, email

  // Profile fields
  onboardingCompleted   Boolean  @default(false)

  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt

  // Relations for multi-platform content optimization tools
  platformConfigs       PlatformConfig[]
  thumbnailGenerations  ThumbnailGeneration[]
  seoOptimizations      SeoOptimization[]
  hashtagSets           HashtagSet[]

  // Brand Profile relations
  brandProfiles         BrandProfile[]
  voiceTrainings        VoiceTraining[]

  // Universal Content Optimizer relations
  contentOptimizations  ContentOptimization[]
  savedGenerations      SavedGeneration[]

  // YouTube Research relations
  youtubeVideos         YouTubeVideo[]
  youtubeChannels        YouTubeChannel[]
  youtubeFilterPresets  YouTubeFilterPreset[]

  @@map("users")
}

// Enums for multi-platform content optimization tools
enum PlatformType {
  YOUTUBE
  INSTAGRAM
  TIKTOK
  LINKEDIN
  TWITTER
  BLOG
  GENERIC
  REDDIT
}

enum GenerationStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
}

// Platform Configuration Models
model Platform {
  id          String   @id @default(uuid())
  name        String   @unique
  displayName String
  icon        String
  color       String
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  // Relations
  configs     PlatformConfig[]
  thumbnailTemplates ThumbnailTemplate[]
  thumbnailGenerations ThumbnailGeneration[]
  seoOptimizations SeoOptimization[]
  seoKeywords  SeoKeyword[]
  hashtagSets HashtagSet[]
  hashtags    Hashtag[]
  
  @@index([isActive])
  @@map("platforms")
}

model PlatformConfig {
  id          String   @id @default(uuid())
  platformId  String
  userId      String?
  configType  String   // 'thumbnail', 'seo', 'hashtags', 'general'
  settings    Json     // Platform-specific settings
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  // Relations
  platform    Platform @relation(fields: [platformId], references: [id], onDelete: Cascade)
  user        User?    @relation(fields: [userId], references: [id], onDelete: SetNull)
  
  @@index([platformId])
  @@index([userId])
  @@index([configType])
  @@map("platform_configs")
}

// AI Thumbnail Generator Models
model ThumbnailTemplate {
  id          String   @id @default(uuid())
  name        String
  platformId  String
  dimensions  Json     // {width: 1920, height: 1080}
  overlays    Json[]   // Array of overlay configurations
  isDefault   Boolean  @default(false)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  // Relations
  platform    Platform @relation(fields: [platformId], references: [id], onDelete: Cascade)
  generations ThumbnailGeneration[]
  
  @@index([platformId])
  @@index([isActive])
  @@index([isDefault])
  @@map("thumbnail_templates")
}

model ThumbnailGeneration {
  id            String   @id @default(uuid())
  userId        String
  platformId    String
  templateId    String?
  contentType   String   // video, blog, social, etc.
  title         String
  description   String?
  prompt        String
  dimensions    Json     // {width: 1920, height: 1080}
  overlays      Json[]   // Array of overlay configurations
  imageUrl      String?
  thumbnailUrl  String?
  status        GenerationStatus
  metadata      Json?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  
  // Relations
  user          User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  platform      Platform @relation(fields: [platformId], references: [id], onDelete: Cascade)
  template      ThumbnailTemplate? @relation(fields: [templateId], references: [id], onDelete: SetNull)
  overlayConfigs ThumbnailOverlay[]
  
  @@index([userId])
  @@index([platformId])
  @@index([templateId])
  @@index([status])
  @@index([createdAt])
  @@map("thumbnail_generations")
}

model ThumbnailOverlay {
  id            String   @id @default(uuid())
  generationId  String
  type          String   // text, image, logo, watermark
  position      Json     // {x: 100, y: 100}
  size          Json     // {width: 200, height: 50}
  style         Json?    // Style configuration
  content       Json?    // Content configuration
  zIndex        Int      @default(1)
  isVisible     Boolean  @default(true)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  
  // Relations
  generation    ThumbnailGeneration @relation(fields: [generationId], references: [id], onDelete: Cascade)
  
  @@index([generationId])
  @@index([type])
  @@map("thumbnail_overlays")
}

// Title & Description SEO Optimizer Models
model SeoOptimization {
  id              String   @id @default(uuid())
  userId          String
  platformId      String
  contentType     String
  originalTitle   String?
  originalDesc    String?
  optimizedTitle  String
  optimizedDesc   String
  keywords        String[]
  seoScore        Float?
  characterCount  Json     // {title: 50, description: 200}
  variations      Json[]   // A/B test variations
  performance     Json?    // Performance metrics
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  // Relations
  user            User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  platform        Platform @relation(fields: [platformId], references: [id], onDelete: Cascade)
  keywordAnalysis SeoKeyword[]
  performanceData SeoPerformance[]
  
  @@index([userId])
  @@index([platformId])
  @@index([contentType])
  @@index([createdAt])
  @@map("seo_optimizations")
}

model SeoKeyword {
  id            String   @id @default(uuid())
  keyword       String
  platformId    String
  optimizationId String?
  competition   String   // low, medium, high
  volume        Int?
  difficulty    Float?
  trend         String   // rising, stable, declining
  lastUpdated   DateTime @default(now())
  
  // Relations
  platform      Platform @relation(fields: [platformId], references: [id], onDelete: Cascade)
  optimization  SeoOptimization? @relation(fields: [optimizationId], references: [id], onDelete: SetNull)
  
  @@unique([keyword, platformId])
  @@index([platformId])
  @@index([competition])
  @@index([trend])
  @@map("seo_keywords")
}

model SeoPerformance {
  id            String   @id @default(uuid())
  optimizationId String
  metric        String   // views, clicks, engagement, etc.
  value         Float
  platform      String   // Source platform for analytics
  date          DateTime
  metadata      Json?
  
  // Relations
  optimization  SeoOptimization @relation(fields: [optimizationId], references: [id], onDelete: Cascade)
  
  @@index([optimizationId])
  @@index([metric])
  @@index([date])
  @@map("seo_performance")
}

// Hashtag Generator Models
model HashtagSet {
  id          String   @id @default(uuid())
  userId      String
  platformId  String
  contentType String
  content     String
  hashtags    String[]
  categories  Json[]   // Grouped by category
  trending    String[]
  niche       String[]
  performance Json?    // Performance metrics
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  // Relations
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  platform    Platform @relation(fields: [platformId], references: [id], onDelete: Cascade)
  hashtagData Hashtag[]
  performanceData HashtagPerformance[]
  
  @@index([userId])
  @@index([platformId])
  @@index([contentType])
  @@index([createdAt])
  @@map("hashtag_sets")
}

model Hashtag {
  id          String   @id @default(uuid())
  hashtag     String
  setId       String?
  platformId  String
  category    String?
  usage       Int?
  growth      Float?   // Growth rate
  isTrending  Boolean  @default(false)
  lastUpdated DateTime @default(now())
  
  // Relations
  set         HashtagSet? @relation(fields: [setId], references: [id], onDelete: SetNull)
  platform    Platform @relation(fields: [platformId], references: [id], onDelete: Cascade)
  performanceData HashtagPerformance[]
  
  @@unique([hashtag, platformId])
  @@index([platformId])
  @@index([category])
  @@index([isTrending])
  @@map("hashtags")
}

model HashtagPerformance {
  id          String   @id @default(uuid())
  hashtagId   String
  setId       String?
  metric      String   // reach, engagement, clicks, etc.
  value       Float
  platform    String   // Source platform for analytics
  date        DateTime
  metadata    Json?
  
  // Relations
  hashtag     Hashtag @relation(fields: [hashtagId], references: [id], onDelete: Cascade)
  set         HashtagSet? @relation(fields: [setId], references: [id], onDelete: SetNull)
  
  @@index([hashtagId])
  @@index([setId])
  @@index([metric])
  @@index([date])
  @@map("hashtag_performance")
}

// Brand Profile Models
enum BrandProfileStatus {
  DRAFT
  TRAINING
  READY
  ERROR
}

enum AssetType {
  PDF
  DOCX
  TXT
  IMAGE
  AUDIO
  VIDEO
}

enum TrainingStatus {
  PENDING
  PROCESSING
  COMPLETED
  FAILED
}

model BrandProfile {
  id                          String             @id @default(uuid())
  userId                      String
  name                        String
  description                 String?
  industry                    String?
  targetAudience              String?
  brandColors                 Json?              // Brand color palette
  tone                        String[]           // Array of tone attributes
  voiceModel                  String?            // DeepSeek model identifier
  status                      BrandProfileStatus @default(DRAFT)
  trainingProgress            Float              @default(0) // 0-100 percentage
  lastTrainedAt               DateTime?

  // Advanced fields
  website                     String?
  uniqueSellingProposition   String?
  competitorChannels          String[]           // Array of competitor channel URLs
  inspirationChannels         String[]           @default([]) // Array of inspiration channel URLs
  contentPillars              String[]           // Content pillars
  contentTypeFocus            String[]           // Types of content to focus on
  targetKeywords              String[]           // SEO keywords
  communicationStyle          String?
  formality                   String?            // formal/casual/mixed
  emotionalTone               String?
  complexity                  String?            // simple/moderate/complex
  callToActionStyle           String?            // direct/subtle/none
  competitorAnalysis          Json?              // Results of competitor analysis

  createdAt                   DateTime           @default(now())
  updatedAt                   DateTime           @updatedAt

  // Relations
  user                        User               @relation(fields: [userId], references: [id], onDelete: Cascade)
  assets                      BrandAsset[]
  voiceTrainings              VoiceTraining[]
  contentOptimizations        ContentOptimization[]

  @@index([userId])
  @@index([status])
  @@index([createdAt])
  @@map("brand_profiles")
}

model BrandAsset {
  id                String     @id @default(uuid())
  profileId         String
  fileName          String
  originalName      String
  filePath          String
  fileSize          Int
  fileType          AssetType
  mimeType          String
  extractedText     String?    // Extracted text from documents
  uploadedAt        DateTime   @default(now())

  // Relations
  profile           BrandProfile @relation(fields: [profileId], references: [id], onDelete: Cascade)

  @@index([profileId])
  @@index([fileType])
  @@index([uploadedAt])
  @@map("brand_assets")
}

model VoiceTraining {
  id                String         @id @default(uuid())
  profileId         String
  userId            String
  modelVersion      String         // DeepSeek model version
  trainingData      Json           // Training parameters and data
  vectorEmbeddings  Json?          // Voice vector embeddings
  status            TrainingStatus @default(PENDING)
  errorMessage      String?
  trainingStartedAt DateTime?
  completedAt       DateTime?
  createdAt         DateTime       @default(now())
  updatedAt         DateTime       @updatedAt

  // Relations
  profile           BrandProfile   @relation(fields: [profileId], references: [id], onDelete: Cascade)
  user              User           @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([profileId])
  @@index([userId])
  @@index([status])
  @@index([createdAt])
  @@map("voice_trainings")
}

// ============================================================================
// UNIVERSAL AI CONTENT OPTIMIZER MODELS
// ============================================================================

enum OptimizationMode {
  CONTENT_OPTIMIZATION
  AD_COPY_GENERATION
}

enum ContentType {
  POST
  CAPTION
  TITLE
  DESCRIPTION
  THREAD
  ARTICLE
  AD_COPY
  PRODUCT_DESCRIPTION
  LANDING_PAGE
  EMAIL
  STORY
  REEL
  SHORT
  CAROUSEL
  SCRIPT
  REDDIT_POST
  REDDIT_COMMENT
  REDDIT_AMA
}

model ContentOptimization {
  id                  String             @id @default(uuid())
  userId              String
  mode                OptimizationMode   @default(CONTENT_OPTIMIZATION)
  contentType         ContentType

  // Input
  originalContent     String
  topic               String?
  url                 String?

  // Configuration
  selectedPlatforms   Json               // Array of platform strings
  goal                String             // reach, engagement, clicks, sales, followers
  language            String             @default("en")
  tone                String             // professional, casual, viral, educational, storytelling
  targetAudience      String?
  brandProfileId      String?

  // AI Generated Output
  optimizedResults    Json               // Platform-optimized content with scores
  suggestions         Json?              // AI suggestions and improvements
  performanceScore    Float?

  // Ad Copy Specific
  adFormat           String?            // display, video, social, search, native
  ctaType            String?            // shop_now, learn_more, sign_up, download, contact

  // Metadata
  processingTime      Int?               // Processing time in ms
  status              GenerationStatus   @default(PENDING)

  createdAt           DateTime           @default(now())
  updatedAt           DateTime           @updatedAt

  // Relations
  user                User               @relation(fields: [userId], references: [id], onDelete: Cascade)
  brandProfile        BrandProfile?      @relation(fields: [brandProfileId], references: [id], onDelete: SetNull)
  platformContents    PlatformOptimizedContent[]

  @@index([userId])
  @@index([mode])
  @@index([contentType])
  @@index([status])
  @@index([createdAt])
  @@map("content_optimizations")
}

model PlatformOptimizedContent {
  id                  String             @id @default(uuid())
  optimizationId      String
  platform            PlatformType
  contentType         ContentType

  // Content Output
  title               String?
  caption             String?
  description         String?
  hashtags            String[]
  cta                 String?
  hook                String?

  // Variants (A/B testing)
  variants            Json?              // Multiple content variations

  // Metrics
  engagementScore     Float?
  seoScore            Float?
  characterCount      Json?              // {title: 50, caption: 200}

  // Platform-specific data
  platformData        Json?              // Platform-specific fields

  createdAt           DateTime           @default(now())
  updatedAt           DateTime           @updatedAt

  // Relations
  optimization        ContentOptimization @relation(fields: [optimizationId], references: [id], onDelete: Cascade)

  @@index([optimizationId])
  @@index([platform])
  @@index([contentType])
  @@map("platform_optimized_content")
}

model SavedGeneration {
  id                  String             @id @default(uuid())
  userId              String
  name                String
  optimizationId      String?

  // Saved configuration for re-use
  configuration       Json               // All input parameters
  results             Json               // Generated results

  // Organization
  tags                String[]
  category            String?

  isFavorite          Boolean            @default(false)

  createdAt           DateTime           @default(now())
  updatedAt           DateTime           @updatedAt

  // Relations
  user                User               @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([isFavorite])
  @@index([category])
  @@index([createdAt])
  @@map("saved_generations")
}

// YouTube Research Models
model YouTubeVideo {
  id                String   @id @default(uuid())
  userId            String

  // Video Data from YouTube API
  youtubeVideoId    String   @unique
  title             String
  description       String?  @db.Text
  channelId         String
  channelTitle      String
  thumbnailUrl      String
  publishedAt        DateTime

  // Statistics
  viewCount         Int      @default(0)
  likeCount         Int      @default(0)
  commentCount      Int      @default(0)
  duration          String?  // ISO 8601 duration format

  // Additional Metadata
  tags              String[]
  categoryId        String?
  language          String?

  // Engagement Metrics
  engagementRate    Float?   // Calculated engagement rate

  // Organization
  notes             String?  @db.Text
  tagsCustom        String[] // User-defined tags
  isFavorite        Boolean  @default(false)

  // Relations
  user              User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  savedChannels     YouTubeSavedVideo[]

  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@index([userId])
  @@index([channelId])
  @@index([publishedAt])
  @@index([isFavorite])
  @@map("youtube_videos")
}

model YouTubeChannel {
  id                String   @id @default(uuid())
  userId            String

  // Channel Data from YouTube API
  channelId         String   @unique
  title             String
  description       String?  @db.Text
  thumbnailUrl       String
  customUrl         String?

  // Statistics
  subscriberCount   Int      @default(0)
  videoCount        Int      @default(0)
  viewCount         BigInt   @default(0)

  // Channel Metadata
  country           String?
  language          String?
  keywords          String[] // Channel keywords/tags
  topicCategories   String[] // Channel topic IDs

  // Engagement Metrics
  engagementRate    Float?   // Average engagement rate

  // Organization
  notes             String?  @db.Text
  tagsCustom        String[] // User-defined tags
  isCompetitor      Boolean  @default(false)
  isInspirational   Boolean  @default(false)

  // Relation
  user              User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  savedVideos       YouTubeSavedVideo[]

  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@index([userId])
  @@index([isCompetitor])
  @@index([isInspirational])
  @@index([subscriberCount])
  @@map("youtube_channels")
}

model YouTubeSavedVideo {
  id                String   @id @default(uuid())
  userId            String

  // Relation to video and channel
  videoId           String
  video             YouTubeVideo @relation(fields: [videoId], references: [id], onDelete: Cascade)
  channelId         String
  channel           YouTubeChannel @relation(fields: [channelId], references: [id], onDelete: Cascade)

  // Save context
  listType          String   // competitor, inspiration, saved, watched
  notes             String?  @db.Text

  createdAt         DateTime @default(now())

  @@unique([videoId, channelId, listType])
  @@index([userId])
  @@index([listType])
  @@map("youtube_saved_videos")
}

// ============================================================================
// TREND TRACKING & NICHE RESEARCH MODELS
// ============================================================================

model TrendSnapshot {
  id                String   @id @default(uuid())
  regionCode        String   // IN, US, GB, etc.
  categoryId        String?  // YouTube category ID (null = all categories)

  // Snapshot metadata
  snapshotType      String   // trending, niche_search, channel_analysis
  queryKeyword      String?  // For niche searches
  capturedAt        DateTime @default(now())

  // Aggregated metrics
  totalVideos       Int      @default(0)
  avgViews          Float    @default(0)
  avgLikes          Float    @default(0)
  avgEngagementRate Float    @default(0)

  // Outlier detection results
  outlierCount      Int      @default(0)

  createdAt         DateTime @default(now())

  // Relations
  videoMetrics      VideoMetric[]

  @@index([regionCode])
  @@index([snapshotType])
  @@index([capturedAt])
  @@index([regionCode, categoryId])
  @@map("trend_snapshots")
}

model VideoMetric {
  id                String   @id @default(uuid())
  snapshotId        String
  youtubeVideoId    String

  // Time-series metrics
  viewCount         Int
  likeCount         Int
  commentCount      Int
  engagementRate    Float

  // Growth metrics (calculated from previous snapshots)
  viewsGrowth       Float?   // Percentage growth
  likesGrowth       Float?
  engagementGrowth  Float?

  // Velocity metrics (views per hour since publish)
  viewsPerHour      Float?

  // Outlier detection flags
  isOutlier         Boolean  @default(false)
  outlierType       String?  // viral, high_engagement, fast_growing
  outlierScore      Float?   // How much of an outlier (std devs from mean)

  // Ranking
  rankPosition      Int?     // Position in trending list
  percentile        Float?   // Percentile in category

  capturedAt        DateTime @default(now())

  // Relations
  snapshot          TrendSnapshot @relation(fields: [snapshotId], references: [id], onDelete: Cascade)

  @@unique([snapshotId, youtubeVideoId])
  @@index([snapshotId])
  @@index([youtubeVideoId])
  @@index([isOutlier])
  @@index([capturedAt])
  @@map("video_metrics")
}

model Niche {
  id                String   @id @default(uuid())
  name              String   @unique
  keywords          String[] // Search keywords for this niche
  categoryIds       String[] // Related YouTube category IDs

  // Niche metadata
  description       String?
  parentNicheId     String?

  // Trend metrics (aggregated from Google Trends)
  trendScore        Float?   // Current trend interest (0-100)
  trendDirection    String?  // rising, stable, declining
  trendHistory      Json?    // Historical trend data

  // Content metrics
  avgVideoViews     Float?
  totalChannels     Int      @default(0)
  competitiveness   String?  // low, medium, high

  // Status
  isActive          Boolean  @default(true)
  isTrending        Boolean  @default(false)

  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  // Relations
  parent            Niche?   @relation("NicheHierarchy", fields: [parentNicheId], references: [id], onDelete: SetNull)
  children          Niche[]  @relation("NicheHierarchy")
  nicheSnapshots    NicheSnapshot[]

  @@index([isActive])
  @@index([isTrending])
  @@index([trendDirection])
  @@map("niches")
}

model NicheSnapshot {
  id                String   @id @default(uuid())
  nicheId           String

  // Snapshot data
  capturedAt        DateTime @default(now())
  videoCount        Int

  // Metrics
  avgViews          Float
  medianViews       Float
  avgEngagementRate Float
  topQuartileViews  Float   // 75th percentile

  // Trend detection
  emergingTopics    String[] // Topics rising in this niche
  decliningTopics   String[] // Topics declining in this niche

  // Channel insights
  topChannels       Json?    // Top performing channels
  newChannels       Json?    // Recently active channels

  // Relations
  niche             Niche    @relation(fields: [nicheId], references: [id], onDelete: Cascade)

  @@index([nicheId])
  @@index([capturedAt])
  @@map("niche_snapshots")
}

model SearchTrend {
  id                String   @id @default(uuid())
  keyword           String

  // Google Trends data
  interestValue      Int      // 0-100
  regionCode        String
  timeframe         String   // today 3-m, today 12-m, etc.

  // Trend analysis
  trendDirection    String   // rising, stable, declining
  changePercent     Float?   // Change from previous period
  peakDate          DateTime?

  // Related data
  relatedTopics     Json?    // Related topics from Google Trends
  relatedQueries    Json?    // Related queries from Google Trends

  capturedAt        DateTime @default(now())

  @@unique([keyword, regionCode, timeframe])
  @@index([keyword])
  @@index([regionCode])
  @@index([trendDirection])
  @@index([capturedAt])
  @@map("search_trends")
}

model TrendingTopic {
  id                String   @id @default(uuid())
  topic             String
  nicheId           String?

  // Trend metrics
  volume            Int      // Search volume or mentions
  growth            Float    // Growth rate percentage
  velocity          Float?   // How fast it's growing per day

  // Classification
  category          String
  isViral           Boolean  @default(false)
  isEvergreen       Boolean  @default(false)

  // Content opportunities
  contentIdeas      Json?    // AI-generated content ideas
  targetDemographics String[]

  // Source tracking
  firstSeenAt       DateTime @default(now())
  lastSeenAt        DateTime @default(now())
  sourceType        String   // youtube_trending, google_trends, social

  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@index([nicheId])
  @@index([category])
  @@index([isViral])
  @@index([growth])
  @@map("trending_topics")
}

model OutlierVideo {
  id                String   @id @default(uuid())
  youtubeVideoId    String   @unique

  // Outlier classification
  outlierType       String   // viral_video, high_engagement, fast_growth, unexpected_hit
  outlierScore      Float    // Statistical significance (z-score)

  // Context
  nicheId           String?
  categoryId        String?
  regionCode        String

  // Performance compared to niche baseline
  viewsVsBaseline   Float    // How many times above baseline
  engagementVsBaseline Float

  // Why it's an outlier
  detectedReasons   String[] // ["hook in first 3 seconds", "trending topic", "controversy"]
  keyFactors        Json?    // AI-identified success factors

  // Content analysis
  titleLength       Int
  titleEmojis       Boolean
  hasHowTo          Boolean
  hasNumber         Boolean
  thumbnailType     String?  // face, text, comparison, etc.

  // Detection metadata
  detectedAt        DateTime @default(now())
  verifiedAt        DateTime?

  // Status
  isVerified        Boolean  @default(false)
  isFalsePositive   Boolean  @default(false)

  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@index([outlierType])
  @@index([nicheId])
  @@index([regionCode])
  @@index([detectedAt])
  @@map("outlier_videos")
}

model YouTubeFilterPreset {
  id                String   @id @default(uuid())
  userId            String
  name              String

  // Filter configuration
  filters           Json     // Stores all filter settings as JSON

  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  // Relations
  user              User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([createdAt])
  @@map("youtube_filter_presets")
}
